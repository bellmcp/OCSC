{"ast":null,"code":"import _objectSpread from\"/Users/apple/Documents/GitHub/OCSCE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/apple/Documents/GitHub/OCSCE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/apple/Documents/GitHub/OCSCE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/apple/Documents/GitHub/OCSCE/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import TextField from\"@material-ui/core/TextField\";import Paper from\"@material-ui/core/Paper\";import Box from\"@material-ui/core/Box\";import Grid from\"@material-ui/core/Grid\";import BackgroundHeader from\"../../pic/001-02.png\";import{makeStyles}from\"@material-ui/core/styles\";import\"../../index.css\";import logo from\"../../pic/ocsc-logo_7.png\";import{Redirect}from\"react-router\";import post from\"../../service/postlogin\";import Modals from\"../../component/admin/Modals\";var useStyles=makeStyles(function(theme){return{root:{height:\"100vh\"},image:{backgroundImage:\"url(\"+BackgroundHeader+\")\",backgroundRepeat:\"no-repeat\",backgroundColor:theme.palette.type===\"light\"?theme.palette.grey[50]:theme.palette.grey[900],backgroundSize:\"cover\",backgroundPosition:\"center\"},paper:{margin:theme.spacing(8,4),display:\"flex\",flexDirection:\"column\",alignItems:\"center\"},avatar:{margin:theme.spacing(1),backgroundColor:theme.palette.secondary.main},form:{width:\"100%\",// Fix IE 11 issue.\nmarginTop:theme.spacing(1)},submit:{margin:theme.spacing(3,0,2)}};});export default function Information(){// post id ,user name >> get response success get token >>save token in http header, fail return false\nvar classes=useStyles();//const [information, setInformation] = useState(Data);\nvar _useState=useState({user:\"\",password:\"\",authen:false}),_useState2=_slicedToArray(_useState,2),loginId=_useState2[0],setLogin=_useState2[1];function getCookie(name){var nameEQ=name+\"=\";var ca=document.cookie.split(\";\");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)===\" \"){c=c.substring(1,c.length);}if(c.indexOf(nameEQ)===0)return c.substring(nameEQ.length,c.length);}return null;}var loginbotton={width:\"-webkit-fill-available\",height:\"40px\",color:\"white\",background:\"royalblue\",border:\"hidden\",borderradius:\"4px\"};var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),stat=_React$useState2[0],setStatus=_React$useState2[1];var onLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return post(loginId);case 2:result=_context.sent;console.log(result);if(result===404){setStatus({stat:404,fetch:false,text:\"หาไม่พบ\"});}if(result===401){setStatus({stat:401,fetch:false,text:\"ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง\"});}if(result===500){setStatus({stat:500,fetch:false,text:\"ความผิดพลาดของโปรแกรม\"});}if(result===999){setStatus({stat:999,fetch:false,text:\"เกิดความผิดพลาด\"});}console.log(\"status\",stat);case 9:case\"end\":return _context.stop();}}},_callee);}));return function onLogin(){return _ref.apply(this,arguments);};}();var onSubmit=function onSubmit(){console.log(\"onSubmit\");if(loginId.user===\"admin\"&&loginId.password===\"1234\"){setLogin(_objectSpread({},loginId,{authen:true}));console.log(\"sumbit\",loginId);document.cookie=\"token=\"+\"asdasdas\"+\";\";}else{}};return/*#__PURE__*/React.createElement(Grid,{container:true,position:\"center\",justify:\"center\",alignContent:\"center\",component:\"main\",className:classes.root},/*#__PURE__*/React.createElement(Grid,{item:true,position:\"center\",xs:12,sm:8,md:5,component:Paper,elevation:8},/*#__PURE__*/React.createElement(\"div\",{className:classes.paper},/*#__PURE__*/React.createElement(Box,{mt:5},/*#__PURE__*/React.createElement(\"img\",{src:logo,width:300,alt:\"logo\"})),/*#__PURE__*/React.createElement(\"h2\",null,\"\\u0E23\\u0E30\\u0E1A\\u0E1A\\u0E1B\\u0E23\\u0E30\\u0E40\\u0E21\\u0E34\\u0E19\\u0E04\\u0E27\\u0E32\\u0E21\\u0E2A\\u0E19\\u0E43\\u0E08\\u0E02\\u0E2D\\u0E07\\u0E1A\\u0E38\\u0E04\\u0E04\\u0E25\\u0E17\\u0E35\\u0E48\\u0E21\\u0E35\\u0E15\\u0E48\\u0E2D\\u0E2B\\u0E19\\u0E48\\u0E27\\u0E22\\u0E07\\u0E32\\u0E19\\u0E23\\u0E32\\u0E0A\\u0E01\\u0E32\\u0E23\\u0E44\\u0E17\\u0E22\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.form},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,id:\"username\",label:/*#__PURE__*/React.createElement(\"p\",null,\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\"),name:\"username\",autoComplete:\"username\",autoFocus:true,onChange:function onChange(e){return setLogin(_objectSpread({},loginId,{user:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",margin:\"normal\",fullWidth:true,name:\"password\",label:/*#__PURE__*/React.createElement(\"p\",null,\"\\u0E23\\u0E2B\\u0E31\\u0E2A\\u0E1C\\u0E48\\u0E32\\u0E19\"),type:\"password\",id:\"password\",autoComplete:\"current-password\",onChange:function onChange(e){return setLogin(_objectSpread({},loginId,{password:e.target.value}));}}),getCookie(\"token\")!==null?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/admin/dash\"}}):\"\"),/*#__PURE__*/React.createElement(\"button\",{onClick:onSubmit,style:loginbotton},/*#__PURE__*/React.createElement(\"p\",null,\"\\u0E25\\u0E07\\u0E0A\\u0E37\\u0E48\\u0E2D\\u0E40\\u0E02\\u0E49\\u0E32\\u0E43\\u0E0A\\u0E49\\u0E23\\u0E30\\u0E1A\\u0E1A\")))));}","map":{"version":3,"sources":["/Users/apple/Documents/GitHub/OCSCE/src/Pages/admin/Login.js"],"names":["React","useState","TextField","Paper","Box","Grid","BackgroundHeader","makeStyles","logo","Redirect","post","Modals","useStyles","theme","root","height","image","backgroundImage","backgroundRepeat","backgroundColor","palette","type","grey","backgroundSize","backgroundPosition","paper","margin","spacing","display","flexDirection","alignItems","avatar","secondary","main","form","width","marginTop","submit","Information","classes","user","password","authen","loginId","setLogin","getCookie","name","nameEQ","ca","document","cookie","split","i","length","c","charAt","substring","indexOf","loginbotton","color","background","border","borderradius","stat","setStatus","onLogin","result","console","log","fetch","text","onSubmit","e","target","value","pathname"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport BackgroundHeader from \"../../pic/001-02.png\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport \"../../index.css\";\nimport logo from \"../../pic/ocsc-logo_7.png\";\nimport { Redirect } from \"react-router\";\nimport post from \"../../service/postlogin\";\nimport Modals from \"../../component/admin/Modals\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: \"100vh\",\n  },\n  image: {\n    backgroundImage: \"url(\" + BackgroundHeader + \")\",\n    backgroundRepeat: \"no-repeat\",\n\n    backgroundColor:\n      theme.palette.type === \"light\"\n        ? theme.palette.grey[50]\n        : theme.palette.grey[900],\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center\",\n  },\n  paper: {\n    margin: theme.spacing(8, 4),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport default function Information() {\n  // post id ,user name >> get response success get token >>save token in http header, fail return false\n  const classes = useStyles();\n  //const [information, setInformation] = useState(Data);\n  const [loginId, setLogin] = useState({\n    user: \"\",\n    password: \"\",\n    authen: false,\n  });\n  function getCookie(name) {\n    var nameEQ = name + \"=\";\n    var ca = document.cookie.split(\";\");\n    for (var i = 0; i < ca.length; i++) {\n      var c = ca[i];\n      while (c.charAt(0) === \" \") c = c.substring(1, c.length);\n      if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);\n    }\n    return null;\n  }\n  const loginbotton = {\n    width: \"-webkit-fill-available\",\n    height: \"40px\",\n    color: \"white\",\n\n    background: \"royalblue\",\n    border: \"hidden\",\n    borderradius: \"4px\",\n  };\n  const [stat, setStatus] = React.useState(\"\");\n  const onLogin = async () => {\n    const result = await post(loginId);\n    console.log(result);\n    if (result === 404) {\n      setStatus({ stat: 404, fetch: false, text: \"หาไม่พบ\" });\n    }\n\n    if (result === 401) {\n      setStatus({\n        stat: 401,\n        fetch: false,\n        text: \"ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง\",\n      });\n    }\n    if (result === 500) {\n      setStatus({ stat: 500, fetch: false, text: \"ความผิดพลาดของโปรแกรม\" });\n    }\n    if (result === 999) {\n      setStatus({ stat: 999, fetch: false, text: \"เกิดความผิดพลาด\" });\n    }\n    console.log(\"status\", stat);\n  };\n  const onSubmit = () => {\n    console.log(\"onSubmit\");\n    if (loginId.user === \"admin\" && loginId.password === \"1234\") {\n      setLogin({ ...loginId, authen: true });\n      console.log(\"sumbit\", loginId);\n      document.cookie = \"token=\" + \"asdasdas\" + \";\";\n    } else {\n    }\n  };\n  return (\n    <Grid\n      container\n      position=\"center\"\n      justify=\"center\"\n      alignContent=\"center\"\n      component=\"main\"\n      className={classes.root}\n    >\n      <Grid\n        item\n        position=\"center\"\n        xs={12}\n        sm={8}\n        md={5}\n        component={Paper}\n        elevation={8}\n      >\n        <div className={classes.paper}>\n          <Box mt={5}>\n            <img src={logo} width={300} alt=\"logo\" />\n          </Box>\n\n          <h2>ระบบประเมินความสนใจของบุคคลที่มีต่อหน่วยงานราชการไทย</h2>\n          {/*stat.fetch === false ? (\n            <Modals status={stat.stat} link={stat.text} />\n          ) : (\n            \"\"\n          )*/}\n          <form className={classes.form}>\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              fullWidth\n              id=\"username\"\n              label={<p>รหัสผู้ใช้</p>}\n              name=\"username\"\n              autoComplete=\"username\"\n              autoFocus\n              onChange={(e) => setLogin({ ...loginId, user: e.target.value })}\n            />\n            <TextField\n              variant=\"outlined\"\n              margin=\"normal\"\n              fullWidth\n              name=\"password\"\n              label={<p>รหัสผ่าน</p>}\n              type=\"password\"\n              id=\"password\"\n              autoComplete=\"current-password\"\n              onChange={(e) =>\n                setLogin({ ...loginId, password: e.target.value })\n              }\n            />\n\n            {getCookie(\"token\") !== null ? (\n              <Redirect to={{ pathname: \"/admin/dash\" }} />\n            ) : (\n              \"\"\n            )}\n          </form>\n          <button onClick={onSubmit} style={loginbotton}>\n            <p>ลงชื่อเข้าใช้ระบบ</p>\n          </button>\n        </div>\n      </Grid>\n    </Grid>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}