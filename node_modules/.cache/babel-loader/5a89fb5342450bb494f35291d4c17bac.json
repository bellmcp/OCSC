{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { getMatrixByAngle } from '../util/matrix';\nimport Theme from '../util/theme';\n\nvar TextAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(TextAnnotation, _super);\n\n  function TextAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\n   * @protected\n   * 默认的配置项\n   * @returns {object} 默认的配置项\n   */\n\n\n  TextAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'text',\n      locationType: 'point',\n      x: 0,\n      y: 0,\n      content: '',\n      rotate: null,\n      style: {},\n      defaultCfg: {\n        style: {\n          fill: Theme.textColor,\n          fontSize: 12,\n          textAlign: 'center',\n          textBaseline: 'middle',\n          fontFamily: Theme.fontFamily\n        }\n      }\n    });\n  }; // 复写 setLocation 方法，不需要重新创建 text\n\n\n  TextAnnotation.prototype.setLocation = function (location) {\n    this.set('x', location.x);\n    this.set('y', location.y);\n    this.resetLocation();\n  };\n\n  TextAnnotation.prototype.renderInner = function (group) {\n    this.renderText(group);\n  };\n\n  TextAnnotation.prototype.renderText = function (group) {\n    var _a = this.getLocation(),\n        x = _a.x,\n        y = _a.y;\n\n    var content = this.get('content');\n    var style = this.get('style');\n    var text = this.addShape(group, {\n      type: 'text',\n      id: this.getElementId('text'),\n      name: 'annotation-text',\n      attrs: __assign({\n        x: x,\n        y: y,\n        text: content\n      }, style)\n    });\n    this.applyRotate(text, x, y);\n  };\n\n  TextAnnotation.prototype.applyRotate = function (textShape, x, y) {\n    var rotate = this.get('rotate');\n    var matrix = null;\n\n    if (rotate) {\n      matrix = getMatrixByAngle({\n        x: x,\n        y: y\n      }, rotate);\n    }\n\n    textShape.attr('matrix', matrix);\n  };\n\n  TextAnnotation.prototype.resetLocation = function () {\n    var textShape = this.getElementByLocalId('text');\n\n    if (textShape) {\n      var _a = this.getLocation(),\n          x = _a.x,\n          y = _a.y;\n\n      textShape.attr({\n        x: x,\n        y: y\n      });\n      this.applyRotate(textShape, x, y);\n    }\n  };\n\n  return TextAnnotation;\n}(GroupComponent);\n\nexport default TextAnnotation;","map":{"version":3,"sources":["../../src/annotation/text.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\nimport GroupComponent from '../abstract/group-component';\nimport { getMatrixByAngle } from '../util/matrix';\nimport Theme from '../util/theme';\nvar TextAnnotation = /** @class */ (function (_super) {\n    __extends(TextAnnotation, _super);\n    function TextAnnotation() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * @protected\n     * 默认的配置项\n     * @returns {object} 默认的配置项\n     */\n    TextAnnotation.prototype.getDefaultCfg = function () {\n        var cfg = _super.prototype.getDefaultCfg.call(this);\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'text', locationType: 'point', x: 0, y: 0, content: '', rotate: null, style: {}, defaultCfg: {\n                style: {\n                    fill: Theme.textColor,\n                    fontSize: 12,\n                    textAlign: 'center',\n                    textBaseline: 'middle',\n                    fontFamily: Theme.fontFamily,\n                },\n            } });\n    };\n    // 复写 setLocation 方法，不需要重新创建 text\n    TextAnnotation.prototype.setLocation = function (location) {\n        this.set('x', location.x);\n        this.set('y', location.y);\n        this.resetLocation();\n    };\n    TextAnnotation.prototype.renderInner = function (group) {\n        this.renderText(group);\n    };\n    TextAnnotation.prototype.renderText = function (group) {\n        var _a = this.getLocation(), x = _a.x, y = _a.y;\n        var content = this.get('content');\n        var style = this.get('style');\n        var text = this.addShape(group, {\n            type: 'text',\n            id: this.getElementId('text'),\n            name: 'annotation-text',\n            attrs: __assign({ x: x,\n                y: y, text: content }, style),\n        });\n        this.applyRotate(text, x, y);\n    };\n    TextAnnotation.prototype.applyRotate = function (textShape, x, y) {\n        var rotate = this.get('rotate');\n        var matrix = null;\n        if (rotate) {\n            matrix = getMatrixByAngle({ x: x, y: y }, rotate);\n        }\n        textShape.attr('matrix', matrix);\n    };\n    TextAnnotation.prototype.resetLocation = function () {\n        var textShape = this.getElementByLocalId('text');\n        if (textShape) {\n            var _a = this.getLocation(), x = _a.x, y = _a.y;\n            textShape.attr({\n                x: x,\n                y: y,\n            });\n            this.applyRotate(textShape, x, y);\n        }\n    };\n    return TextAnnotation;\n}(GroupComponent));\nexport default TextAnnotation;\n//# sourceMappingURL=text.js.map"]},"metadata":{},"sourceType":"module"}